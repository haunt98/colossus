name: Docker

on:
  push:
    branches: [master]

jobs:
  storage:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Docker build and push
        uses: docker/build-push-action@v1
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}
          repository: cyndie7216/storage
          tags: latest
          dockerfile: docker/storage/Dockerfile
          cache_froms: cyndie7216/storage:latest

#  gatewayserver:
#    runs-on: ubuntu-latest
#    needs: go
#    steps:
#      - name: Checkout
#        uses: actions/checkout@v2
#      - name: Docker build and push
#        uses: docker/build-push-action@v1
#        with:
#          username: ${{ secrets.DOCKER_USERNAME }}
#          password: ${{ secrets.DOCKER_PASSWORD }}
#          repository: cyndie7216/gatewayserver
#          tags: latest
#          dockerfile: docker/gatewayserver/Dockerfile
#          cache_froms: cyndie7216/gatewayserver:latest
#
#  tesseractserver:
#    runs-on: ubuntu-latest
#    needs: go
#    steps:
#      - name: Checkout
#        uses: actions/checkout@v2
#      - name: Docker build and push
#        uses: docker/build-push-action@v1
#        with:
#          username: ${{ secrets.DOCKER_USERNAME }}
#          password: ${{ secrets.DOCKER_PASSWORD }}
#          repository: cyndie7216/tesseractserver
#          tags: latest
#          dockerfile: docker/tesseractserver/Dockerfile
#          cache_froms: cyndie7216/tesseractserver:latest
#
#  tesseractprocessor:
#    runs-on: ubuntu-latest
#    needs: go
#    steps:
#      - name: Checkout
#        uses: actions/checkout@v2
#      - name: Docker build and push
#        uses: docker/build-push-action@v1
#        with:
#          username: ${{ secrets.DOCKER_USERNAME }}
#          password: ${{ secrets.DOCKER_PASSWORD }}
#          repository: cyndie7216/tesseractprocessor
#          tags: latest
#          dockerfile: docker/tesseractprocessor/Dockerfile
#          cache_froms: cyndie7216/tesseractprocessor:latest
